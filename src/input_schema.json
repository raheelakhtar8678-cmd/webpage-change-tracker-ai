{
  "title": "Webpage Change Tracker + AI Summary",
  "description": "Monitor any webpage and detect content changes with optional AI explanation",
  "type": "object",
  "schemaVersion": 1,
  "properties": {
    "url": {
      "title": "Webpage URL",
      "type": "string",
      "editor": "textfield",
      "description": "URL to monitor for content changes"
    },
    "diffType": {
      "title": "Diff Type",
      "type": "string",
      "enum": ["text", "html"],
      "default": "text",
      "description": "Choose 'text' for a clean, readable diff or 'html' for a raw, structural comparison."
    },
    "useAI": {
      "title": "Enable AI summary",
      "type": "boolean",
      "default": false
    }
  },
  "dependencies": {
    "useAI": {
      "oneOf": [
        {
          "properties": {
            "useAI": {
              "const": true
            },
            "aiProvider": {
              "title": "AI Provider",
              "type": "string",
              "enum": ["openai", "gemini", "openrouter"],
              "default": "openai",
              "description": "Choose your preferred AI provider. For OpenRouter, you can specify a model below."
            },
            "apiKey": {
              "title": "AI API Key",
              "type": "string",
              "editor": "password",
              "description": "Your API key for the selected AI provider."
            }
          },
          "required": ["apiKey"],
          "dependencies": {
            "aiProvider": {
              "oneOf": [
                {
                  "properties": {
                    "aiProvider": {
                      "const": "openrouter"
                    },
                    "openRouterModel": {
                      "title": "OpenRouter Model (optional)",
                      "type": "string",
                      "default": "qwen/qwen-3-coder-480b-a35b",
                      "description": "Specify the OpenRouter model to use (e.g., 'google/gemini-1.5-flash-lite')."
                    }
                  }
                },
                {
                  "properties": {
                    "aiProvider": {
                      "not": {
                        "const": "openrouter"
                      }
                    }
                  }
                }
              ]
            }
          }
        },
        {
          "properties": {
            "useAI": {
              "const": false
            }
          }
        }
      ]
    }
  },
  "required": ["url"]
}
